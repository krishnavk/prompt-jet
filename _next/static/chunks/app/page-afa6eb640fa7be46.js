(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParallelExecutor=void 0;let o=r(4449);class n{async executeParallel(e,t){let r=[],o=[],n=new a(this.config.maxConcurrency);for(let a of e){await n.acquire();let e=this.executeTaskWithRetry(a).then(e=>{r.push(e),t&&t(e)}).finally(()=>{n.release()});o.push(e),o.length>=this.config.maxConcurrency&&await Promise.race(o)}return await Promise.all(o),r}async executeTaskWithRetry(e){let t=Date.now();for(let o=0;o<=this.config.retryAttempts;o++)try{var r;let o=await this.executeWithTimeout(e),n=Date.now()-t;return{requestId:e.requestId,clientId:e.clientId,response:o,executionTimeMs:n,tokensUsed:(null==(r=o.usage)?void 0:r.total_tokens)||0}}catch(r){if(o===this.config.retryAttempts){let o=Date.now()-t;return{requestId:e.requestId,clientId:e.clientId,error:r,executionTimeMs:o,tokensUsed:0}}await this.delay(this.config.retryDelayMs*Math.pow(2,o))}throw Error("Max retries exceeded")}async executeWithTimeout(e){let t=new Promise((t,r)=>{setTimeout(()=>{r(new o.LLMClientError("Request timeout","TIMEOUT",408,e.client.getProviderName()))},this.config.timeoutMs)});return Promise.race([e.client.executePrompt(e.request),t])}delay(e){return new Promise(t=>setTimeout(t,e))}constructor(e={}){this.config={maxConcurrency:e.maxConcurrency||5,timeoutMs:e.timeoutMs||3e4,retryAttempts:e.retryAttempts||3,retryDelayMs:e.retryDelayMs||1e3}}}t.ParallelExecutor=n;class a{async acquire(){return this.permits>0?void this.permits--:new Promise(e=>{this.queue.push(e)})}release(){this.permits++;let e=this.queue.shift();e&&(this.permits--,e())}constructor(e){this.queue=[],this.permits=e}}},624:(e,t,r)=>{"use strict";var o=Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]},n=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorUtils=t.PromptExecutor=t.BatchProcessor=t.ParallelExecutor=t.LLMClientFactory=t.OpenRouterClient=t.BaseLLMClient=void 0;var a=r(3372);Object.defineProperty(t,"BaseLLMClient",{enumerable:!0,get:function(){return a.BaseLLMClient}});var s=r(6136);Object.defineProperty(t,"OpenRouterClient",{enumerable:!0,get:function(){return s.OpenRouterClient}});var i=r(6557);Object.defineProperty(t,"LLMClientFactory",{enumerable:!0,get:function(){return i.LLMClientFactory}});var l=r(555);Object.defineProperty(t,"ParallelExecutor",{enumerable:!0,get:function(){return l.ParallelExecutor}});var c=r(1386);Object.defineProperty(t,"BatchProcessor",{enumerable:!0,get:function(){return c.BatchProcessor}});var d=r(1379);Object.defineProperty(t,"PromptExecutor",{enumerable:!0,get:function(){return d.PromptExecutor}}),n(r(8730),t),n(r(1449),t),n(r(3540),t);var u=r(3540);Object.defineProperty(t,"ErrorUtils",{enumerable:!0,get:function(){return u.ErrorUtils}})},1318:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var o=r(3548);function n(){return(0,o.R)()}},1379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromptExecutor=void 0;let o=r(1386);class n{async execute(e,t,r,o){if(console.log("[PromptExecutor] Starting execution with providers:",JSON.stringify(t,null,2)),!e.trim())return console.warn("[PromptExecutor] Empty prompt provided"),[];if(0===t.length)return console.warn("[PromptExecutor] No providers specified"),[];let n=this.prepareRequests(e,t),a=[];try{return(await this.batchProcessor.executeBatch(n,{onProgress:r,onResult:e=>{let t=this.mapBatchResultToExecutionResult(e);null==o||o(t),a.push(t)}})).map(e=>this.mapBatchResultToExecutionResult(e))}catch(e){throw console.error("Error executing prompts:",e),e}}prepareRequests(e,t){return console.log("[PromptExecutor] Preparing requests for providers:",JSON.stringify(t,null,2)),t.map((r,o)=>{if(console.log("[PromptExecutor] Processing provider ".concat(o+1,"/").concat(t.length,":"),JSON.stringify(r)),!r||!r.provider)throw console.error("[PromptExecutor] Invalid provider configuration:",r),Error("Invalid provider configuration at index ".concat(o,": ").concat(JSON.stringify(r)));return{id:"".concat(r.provider,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,11)),prompt:e,apiConfig:{model:r.model,temperature:this.options.temperature,top_p:this.options.topP,top_k:this.options.topK,max_tokens:this.options.maxTokens,frequency_penalty:this.options.frequencyPenalty,presence_penalty:this.options.presencePenalty,stop:this.options.stopSequences,apiKey:this.options.openRouterApiKey,baseUrl:"https://openrouter.ai/api/v1"},metadata:{provider:r.provider,model:r.model}}})}mapBatchResultToExecutionResult(e){var t,r,o,n,a;return{id:e.id,provider:(null==(t=e.metadata)?void 0:t.provider)||"unknown",model:(null==(r=e.metadata)?void 0:r.model)||"unknown",response:(null==(o=e.response)?void 0:o.content)||"",tokensUsed:(null==(a=e.response)||null==(n=a.usage)?void 0:n.total_tokens)||0,executionTimeMs:e.executionTimeMs}}constructor(e={}){var t,r,n;this.options={temperature:.7,topP:1,topK:50,maxTokens:1e3,frequencyPenalty:0,presencePenalty:0,...e};let a=null!=(t=e.maxConcurrency)?t:5,s=null!=(r=e.timeoutMs)?r:3e4,i=null!=(n=e.retries)?n:2;this.batchProcessor=new o.BatchProcessor({maxConcurrency:a,timeoutMs:s,retries:i})}}t.PromptExecutor=n,t.default=n},1386:(e,t,r)=>{"use strict";var o=r(4338);Object.defineProperty(t,"__esModule",{value:!0}),t.BatchProcessor=void 0;let n=r(555),a=r(6557);class s{async executeBatch(e,t){let r=[];for(let t of e)try{var n,s,i,l,c,d,u;let e=(null==(n=t.metadata)?void 0:n.provider)||"openrouter";console.log("[BatchProcessor] Creating client for provider: ".concat(e),{hasApiKey:!!((null==(s=t.apiConfig)?void 0:s.apiKey)||"openrouter"===e&&o.env.OPENROUTER_API_KEY)});let p={...t.apiConfig,..."openrouter"===e&&{apiKey:(null==(i=t.apiConfig)?void 0:i.apiKey)||o.env.OPENROUTER_API_KEY,baseUrl:"https://openrouter.ai/api/v1"}},m=a.LLMClientFactory.createClient(e,p),h={model:(null==(l=t.apiConfig)?void 0:l.model)||"default",messages:[{role:"user",content:t.prompt}],max_tokens:(null==(c=t.apiConfig)?void 0:c.max_tokens)||1e3,temperature:null!=(u=null==(d=t.apiConfig)?void 0:d.temperature)?u:.7};r.push({requestId:t.id,clientId:e,client:m,request:h})}catch(e){console.error("Failed to create client for request ".concat(t.id,":"),e);continue}return(await this.executor.executeParallel(r,r=>{var o,n,a,s;let i={id:r.requestId,response:r.response?{content:(null==(n=r.response.choices[0])||null==(o=n.message)?void 0:o.content)||"",usage:r.response.usage}:void 0,error:null==(a=r.error)?void 0:a.message,executionTimeMs:r.executionTimeMs,metadata:null==(s=e.find(e=>e.id===r.requestId))?void 0:s.metadata};(null==t?void 0:t.onResult)&&t.onResult(i)})).map(t=>{var r,o,n,a,s,i;let l="";return t.response&&Array.isArray(t.response.choices)?l=t.response.choices.map(e=>{var t;return(null==(t=e.message)?void 0:t.content)||""}).join(""):(null==(a=t.response)||null==(n=a.choices)||null==(o=n[0])||null==(r=o.message)?void 0:r.content)&&(l=t.response.choices[0].message.content),{id:t.requestId,response:t.response?{content:l,usage:t.response.usage}:void 0,error:null==(s=t.error)?void 0:s.message,executionTimeMs:t.executionTimeMs,metadata:null==(i=e.find(e=>e.id===t.requestId))?void 0:i.metadata}})}constructor(e={}){this.executor=new n.ParallelExecutor({maxConcurrency:e.maxConcurrency||5,timeoutMs:e.timeoutMs||3e4,retryAttempts:e.retries||2})}}t.BatchProcessor=s},1449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2123:(e,t,r)=>{"use strict";r.d(t,{SQ:()=>p,_2:()=>m,hO:()=>h,rI:()=>d,ty:()=>u});var o=r(4568),n=r(7620),a=r(6715),s=r(7911),i=r(4931),l=r(1261),c=r(9883);let d=a.bL,u=a.l9;a.YJ,a.ZL,a.Pb,a.z6,n.forwardRef((e,t)=>{let{className:r,inset:n,children:i,...l}=e;return(0,o.jsxs)(a.ZP,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",r),...l,children:[i,(0,o.jsx)(s.A,{className:"ml-auto h-4 w-4"})]})}).displayName=a.ZP.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.G5,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})}).displayName=a.G5.displayName;let p=n.forwardRef((e,t)=>{let{className:r,sideOffset:n=4,...s}=e;return(0,o.jsx)(a.ZL,{children:(0,o.jsx)(a.UC,{ref:t,sideOffset:n,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})})});p.displayName=a.UC.displayName;let m=n.forwardRef((e,t)=>{let{className:r,inset:n,...s}=e;return(0,o.jsx)(a.q7,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",r),...s})});m.displayName=a.q7.displayName;let h=n.forwardRef((e,t)=>{let{className:r,children:n,checked:s,...l}=e;return(0,o.jsxs)(a.H_,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:s,...l,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(a.VF,{children:(0,o.jsx)(i.A,{className:"h-4 w-4"})})}),n]})});h.displayName=a.H_.displayName,n.forwardRef((e,t)=>{let{className:r,children:n,...s}=e;return(0,o.jsxs)(a.hN,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...s,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(a.VF,{children:(0,o.jsx)(l.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=a.hN.displayName,n.forwardRef((e,t)=>{let{className:r,inset:n,...s}=e;return(0,o.jsx)(a.JU,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r),...s})}).displayName=a.JU.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=a.wv.displayName},2710:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});var o=r(4568),n=r(7620),a=r(9883);let s=n.forwardRef((e,t)=>{let{className:r,variant:n="default",size:s="default",...i}=e;return(0,o.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===n,"border border-input hover:bg-accent":"outline"===n,"hover:bg-accent hover:text-accent-foreground":"ghost"===n},{"h-10 px-4 py-2":"default"===s,"h-9 px-3":"sm"===s,"h-11 px-8":"lg"===s},r),ref:t,...i})});s.displayName="Button"},2982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTimeoutError=t.createAuthError=t.createRateLimitError=t.createConfigurationError=void 0,t.isLLMClientError=n,t.isRetryableError=a,t.normalizeError=s,t.toClientError=i,t.createErrorResponse=l,t.assert=c,t.createErrorFactory=d;let o=r(4449);function n(e){return e instanceof o.LLMClientError}function a(e){return!!n(e)&&e.retryable}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof o.LLMClientError?Object.keys(t).length>0?new o.LLMClientError(e.message,e.code,e.statusCode,e.provider,e.retryable,{...e.details,...t},e.cause):e:e instanceof Error?new o.LLMClientError(e.message,"UNKNOWN_ERROR",500,void 0,!1,{...t,originalError:e.name},e):"string"==typeof e?new o.LLMClientError(e,"UNKNOWN_ERROR",500,void 0,!1,t):new o.LLMClientError("An unknown error occurred","UNKNOWN_ERROR",500,void 0,!1,{...t,originalError:e})}function i(e){return s(e).toClientError()}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{error:s(e,t).toClientError(),success:!1,timestamp:new Date().toISOString()}}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.LLMClientError;for(var n=arguments.length,a=Array(n>3?n-3:0),s=3;s<n;s++)a[s-3]=arguments[s];if(!e)throw new r(t,...a)}function d(e){return function(t){for(var r=arguments.length,o=Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];return new e(t,...o)}}t.createConfigurationError=d(o.LLMClientError),t.createRateLimitError=d(o.LLMClientError),t.createAuthError=d(o.LLMClientError),t.createTimeoutError=d(o.LLMClientError),t.default={isLLMClientError:n,isRetryableError:a,normalizeError:s,toClientError:i,createErrorResponse:l,assert:c,createErrorFactory:d,createConfigurationError:t.createConfigurationError,createRateLimitError:t.createRateLimitError,createAuthError:t.createAuthError,createTimeoutError:t.createTimeoutError}},3372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLLMClient=void 0;let o=function(e){return e&&e.__esModule?e:{default:e}}(r(7062)),n=r(4449);class a{setupInterceptors(){this.httpClient.interceptors.request.use(e=>e,e=>Promise.reject(e)),this.httpClient.interceptors.response.use(e=>e,async e=>{let t=e.config;return t&&this.isRetryableError(e)?(t.retryCount=t.retryCount||0,t.retryCount>=(this.config.maxRetries||3))?Promise.reject(this.handleError(e)):(t.retryCount+=1,await this.delay((this.config.retryDelay||1e3)*t.retryCount),this.httpClient(t)):Promise.reject(this.handleError(e))})}async delay(e){return new Promise(t=>setTimeout(t,e))}isRetryableError(e){if(!e.response)return!0;let t=e.response.status;return 429===t||t>=500||408===t}handleError(e){if("ECONNABORTED"===e.code)return new n.LLMTimeoutError("Request timeout: ".concat(e.message),this.getProviderName());if(e.response){var t,r;let o=e.response.status,a=(null==(r=e.response.data)||null==(t=r.error)?void 0:t.message)||e.message;switch(o){case 401:case 403:return new n.LLMAuthenticationError(a,this.getProviderName());case 429:return new n.LLMRateLimitError(a,this.getProviderName());case 408:return new n.LLMTimeoutError(a,this.getProviderName());default:return new n.LLMClientError(a,"HTTP_".concat(o),o,this.getProviderName(),this.isRetryableError(e))}}return new n.LLMClientError(e.message,"UNKNOWN",void 0,this.getProviderName(),!0)}transformMessages(e){return e.map(e=>({role:e.role,content:e.content,...e.name&&{name:e.name},...e.tool_calls&&{tool_calls:e.tool_calls}}))}constructor(e){this.config=e,this.httpClient=o.default.create({timeout:e.timeout||3e4,headers:{"Content-Type":"application/json",...e.customHeaders}}),this.setupInterceptors()}}t.BaseLLMClient=a},3418:(e,t,r)=>{Promise.resolve().then(r.bind(r,8700))},3540:(e,t,r)=>{"use strict";var o=Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]},n=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorUtils=void 0,n(r(4449),t),n(r(2982),t),n(r(3717),t);var a=r(2982);Object.defineProperty(t,"ErrorUtils",{enumerable:!0,get:function(){return(a&&a.__esModule?a:{default:a}).default}})},3548:(e,t,r)=>{"use strict";r.d(t,{ApiConfigProvider:()=>i,R:()=>l});var o=r(4568),n=r(7620),a=r(5851);let s=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=function(e,t){let[r,o]=(0,n.useState)(()=>{try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):""}catch(t){return console.error('Error reading localStorage key "'.concat(e,'":'),t),""}});return(0,n.useEffect)(()=>{let t=t=>{if(t.key===e&&null!==t.newValue)try{o(JSON.parse(t.newValue))}catch(t){console.error('Error parsing storage event for key "'.concat(e,'":'),t)}},r=t=>{t.detail.key===e&&o(t.detail.value)};return window.addEventListener("storage",t),window.addEventListener("localStorageChange",r),()=>{window.removeEventListener("storage",t),window.removeEventListener("localStorageChange",r)}},[e]),[r,t=>{try{let n=t instanceof Function?t(r):t;o(n),window.localStorage.setItem(e,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("localStorageChange",{detail:{key:e,value:n}}))}catch(t){console.error('Error setting localStorage key "'.concat(e,'":'),t)}}]}("openrouter-api-key",""),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)("");return(0,n.useEffect)(()=>{r&&l?u((0,a.T)(r,l)):u("")},[r,l]),(0,o.jsx)(s.Provider,{value:{encryptedApiKey:r,setEncryptedApiKey:i,openRouterApiKey:d,setOpenRouterApiKey:u,passphrase:l,setPassphrase:c,isConfigured:{openrouter:!!d},clearAll:()=>{i(""),u(""),c("")}},children:t})}function l(){let e=(0,n.useContext)(s);if(!e)throw Error("useApiConfigContext must be used within ApiConfigProvider");return e}},3717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=void 0,t.ERROR_CODES={CONFIGURATION_ERROR:"CONFIGURATION_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",AUTHORIZATION_ERROR:"AUTHORIZATION_ERROR",NOT_FOUND:"NOT_FOUND",RATE_LIMIT_EXCEEDED:"RATE_LIMIT_EXCEEDED",QUOTA_EXCEEDED:"QUOTA_EXCEEDED",INTERNAL_SERVER_ERROR:"INTERNAL_SERVER_ERROR",SERVICE_UNAVAILABLE:"SERVICE_UNAVAILABLE",TIMEOUT:"TIMEOUT",MODEL_OVERLOADED:"MODEL_OVERLOADED",CONTENT_FILTERED:"CONTENT_FILTERED",INVALID_REQUEST:"INVALID_REQUEST",NETWORK_ERROR:"NETWORK_ERROR",CONNECTION_ERROR:"CONNECTION_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"}},4449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LLMTimeoutError=t.LLMAuthenticationError=t.LLMRateLimitError=t.LLMConfigurationError=t.LLMClientError=void 0;class r extends Error{toJSON(){return{name:this.name,message:this.message,code:this.code,statusCode:this.statusCode,provider:this.provider,retryable:this.retryable,timestamp:this.timestamp,details:this.details,...!1}}toClientError(){return{name:this.name,message:this.message,code:this.code,statusCode:this.statusCode,retryable:this.retryable,timestamp:this.timestamp}}constructor(e,t="LLM_ERROR",r=500,o,n=!1,a,s){super(e),this.code=t,this.statusCode=r,this.provider=o,this.retryable=n,this.cause=s,this.name="LLMClientError",this.timestamp=new Date().toISOString(),this.details=a,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}t.LLMClientError=r;class o extends r{constructor(e,t,r,o){super(e,"CONFIGURATION_ERROR",400,t,!1,r,o),this.name="LLMConfigurationError"}}t.LLMConfigurationError=o;class n extends r{constructor(e,t,r,o,n){super(e,"RATE_LIMIT",429,t,!0,{...o,...r&&{resetTime:r.toISOString()}},n),this.resetTime=r,this.name="LLMRateLimitError"}}t.LLMRateLimitError=n;class a extends r{constructor(e,t,r,o){super(e,"AUTHENTICATION_ERROR",401,t,!1,r,o),this.name="LLMAuthenticationError"}}t.LLMAuthenticationError=a;class s extends r{constructor(e,t,r,o,n){super(e,"TIMEOUT",408,t,!0,{...o,...r&&{timeoutMs:r}},n),this.timeoutMs=r,this.name="LLMTimeoutError"}}t.LLMTimeoutError=s},5156:()=>{},5851:(e,t,r)=>{"use strict";r.d(t,{R:()=>a,T:()=>s});var o=r(3910),n=r.n(o);function a(e,t){return n().AES.encrypt(e,t).toString()}function s(e,t){try{return n().AES.decrypt(e,t).toString(n().enc.Utf8)}catch(e){return""}}},6136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenRouterClient=void 0;let o=r(3372),n=r(4449);class a extends o.BaseLLMClient{async executePrompt(e){if(!this.config.apiKey)throw new n.LLMConfigurationError("OpenRouter API key is required","openrouter");let t={model:e.model,messages:this.transformMessages(e.messages),temperature:e.temperature,max_tokens:e.max_tokens,top_p:e.top_p,frequency_penalty:e.frequency_penalty,presence_penalty:e.presence_penalty,stream:!1,tools:e.tools,tool_choice:e.tool_choice,response_format:e.response_format};console.log("[OpenRouterClient] Sending request to OpenRouter:",{url:"".concat(this.baseUrl,"/chat/completions"),headers:{Authorization:"Bearer [REDACTED]","HTTP-Referer":this.httpClient.defaults.headers.common["HTTP-Referer"],"X-Title":this.httpClient.defaults.headers.common["X-Title"],"Content-Type":"application/json"},data:t});try{let e=await this.httpClient.post("".concat(this.baseUrl,"/chat/completions"),t);return console.log("[OpenRouterClient] Raw API response data:",JSON.stringify(e.data,null,2)),e.data}catch(e){var r,o,a,s,i,l,c;throw console.error("[OpenRouterClient] Error executing prompt:",{status:null==(r=e.response)?void 0:r.status,statusText:null==(o=e.response)?void 0:o.statusText,data:null==(a=e.response)?void 0:a.data,config:{url:null==(s=e.config)?void 0:s.url,method:null==(i=e.config)?void 0:i.method,headers:{...null==(l=e.config)?void 0:l.headers,Authorization:"Bearer [REDACTED]"},data:null==(c=e.config)?void 0:c.data}}),e}}async *executePromptStream(e){throw Error("Streaming responses are currently disabled. Use executePrompt instead for full completion responses.")}async getAvailableModels(){if(!this.config.apiKey)throw new n.LLMConfigurationError("OpenRouter API key is required","openrouter");return(await this.httpClient.get("".concat(this.baseUrl,"/models"))).data.data.map(e=>({id:e.id,name:e.name||e.id,provider:"openrouter",context_length:e.context_length,pricing:e.pricing}))}async validateConfig(){return!!this.config.apiKey}getProviderName(){return"openrouter"}transformMessages(e){return e.map(e=>{e.role&&e.content||console.warn("Invalid message format:",e);let t={role:e.role,content:e.content};return e.name&&"string"==typeof e.name&&(t.name=e.name),Array.isArray(e.tool_calls)&&e.tool_calls.length>0&&(t.tool_calls=e.tool_calls),t})}constructor(e){super(e),this.baseUrl="https://openrouter.ai/api/v1",e.apiKey&&(this.httpClient.defaults.headers.common.Authorization="Bearer ".concat(e.apiKey)),this.httpClient.defaults.headers.common["HTTP-Referer"]="https://prompt-jet.com",this.httpClient.defaults.headers.common["X-Title"]="Prompt Jet"}}t.OpenRouterClient=a},6557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LLMClientFactory=void 0;let o=r(6136);class n{static createClient(e,t){console.log("[LLMClientFactory] Creating client for provider:",{originalProvider:e,configKeys:t?Object.keys(t):"no config"});let r=null==e?void 0:e.toString().trim().toLowerCase();if(!r){let t=Error("Provider name is required");throw console.error("[LLMClientFactory] Error:",t.message,{provider:e,normalizedProvider:r}),t}let n={openrouter:e=>new o.OpenRouterClient(e)},a=n[r];if(!a){let t=Object.keys(n).join(", "),o=Error('Unsupported provider: "'.concat(e,'". ')+"Supported providers are: ".concat(t));throw console.error("[LLMClientFactory] Error:",o.message,{originalProvider:e,normalizedProvider:r,supportedProviders:t}),o}try{return a(t)}catch(t){throw Error('Failed to initialize client for provider "'.concat(e,'": ').concat(t instanceof Error?t.message:String(t)))}}static getSupportedProviders(){return["openrouter"]}}t.LLMClientFactory=n},8700:(e,t,r)=>{"use strict";r.d(t,{PromptExecutor:()=>eo});var o=r(4568),n=r(7620),a=r(1318);let s=[{provider:"openrouter",model:"z-ai/glm-4.5",name:"Z.AI GLM 4.5",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"z-ai/glm-4.5-air",name:"Z.AI GLM 4.5 Air",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"qwen/qwen3-235b-a22b-thinking-2507",name:"Qwen Qwen3-235B A22B Thinking",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"qwen/qwen3-coder",name:"Qwen Qwen3 Coder",category:"Specialized Code Models"},{provider:"openrouter",model:"qwen/qwen3-coder:free",name:"Qwen Qwen3 Coder (free)",category:"Specialized Code Models"},{provider:"openrouter",model:"deepseek/deepseek-r1",name:"DeepSeek R1",category:"Flagship Open-Source Models"},{provider:"openrouter",model:"deepseek/deepseek-r1-0528",name:"DeepSeek R1 0528",category:"Flagship Open-Source Models"},{provider:"openrouter",model:"deepseek/deepseek-r1-0528-qwen",name:"DeepSeek R1 0528 Qwen",category:"Flagship Open-Source Models"},{provider:"openrouter",model:"mistralai/magistral-medium-2506",name:"Mistral Magistral Medium",category:"Advanced Reasoning Models"},{provider:"openrouter",model:"mistralai/devstral-medium",name:"Mistral Devstral Medium",category:"Specialized Code Models"},{provider:"openrouter",model:"mistralai/devstral-small",name:"Mistral Devstral Small",category:"Specialized Code Models"},{provider:"openrouter",model:"mistralai/mistral-medium-3",name:"Mistral Mistral Medium 3",category:"Popular Foundation Models"},{provider:"openrouter",model:"mistralai/codestral-2501",name:"Mistral Codestral",category:"Specialized Code Models"},{provider:"openrouter",model:"x-ai/grok-4",name:"xAI Grok 4",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"x-ai/grok-3",name:"xAI Grok 3",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"x-ai/grok-3-mini",name:"xAI Grok 3 Mini",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"x-ai/grok-3-mini-beta",name:"xAI Grok 3 Mini Beta",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"anthropic/claude-3.5-sonnet",name:"Claude 3.5 Sonnet",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"anthropic/claude-3.7-sonnet",name:"Anthropic Claude 3.7 Sonnet",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"anthropic/claude-opus-4",name:"Anthropic Claude Opus 4",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"openai/o3",name:"OpenAI o3",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"openai/o3-pro",name:"OpenAI o3 Pro",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"openai/gpt-4.1",name:"OpenAI GPT-4.1",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"openai/gpt-4.1-mini",name:"OpenAI GPT-4.1 Mini",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"openai/gpt-4.1-nano",name:"OpenAI GPT-4.1 Nano",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"google/gemini-2.5-pro",name:"Google Gemini 2.5 Pro",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"google/gemini-2.5-flash",name:"Google Gemini 2.5 Flash",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"google/gemini-2.5-flash-lite",name:"Google Gemini 2.5 Flash Lite",category:"Latest Premium Models (2025)"},{provider:"openrouter",model:"meta-llama/llama-4-maverick",name:"Meta Llama 4 Maverick",category:"Popular Foundation Models"},{provider:"openrouter",model:"meta-llama/llama-4-scout",name:"Meta Llama 4 Scout",category:"Popular Foundation Models"},{provider:"openrouter",model:"miniMax/miniMax-m1",name:"MiniMax MiniMax M1",category:"Advanced Long Context Models"},{provider:"openrouter",model:"agentica/deepcoder-14b",name:"Agentica DeepCoder 14B",category:"Specialized Code Models"},{provider:"openrouter",model:"amazon/nova-lite",name:"Amazon Nova Lite",category:"Specialized Multimodal Models"},{provider:"openrouter",model:"amazon/nova-pro",name:"Amazon Nova Pro",category:"Specialized Multimodal Models"},{provider:"openrouter",model:"amazon/nova-micro",name:"Amazon Nova Micro",category:"Popular Foundation Models"},{provider:"openrouter",model:"cognitivecomputations/dolphin-r1",name:"Dolphin R1",category:"Advanced Reasoning Models"},{provider:"openrouter",model:"cognitivecomputations/dolphin-r1-thinker",name:"Dolphin R1 Thinker",category:"Advanced Reasoning Models"},{provider:"openrouter",model:"cognitivecomputations/dolphin-1.1",name:"Dolphin 1.1",category:"Advanced Reasoning Models"},{provider:"openrouter",model:"cognitivecomputations/dolphin-1.1-thinker",name:"Dolphin 1.1 Thinker",category:"Advanced Reasoning Models"},{provider:"openrouter",model:"sarvamai/sarvamai-m",name:"Sarvamai Sarvamai M",category:"Multilingual Specialized Models"},{provider:"openrouter",model:"sarvamai/sarvamai-m-thinker",name:"Sarvamai Sarvamai M Thinker",category:"Multilingual Specialized Models"},{provider:"openrouter",model:"tencent/hunyuan-a13b",name:"Tencent Hunyuan A13B",category:"Popular Foundation Models"},{provider:"openrouter",model:"tencent/hunyuan-a13b-instruct",name:"Tencent Hunyuan A13B Instruct",category:"Popular Foundation Models"},{provider:"openrouter",model:"thudm/glm-4.1",name:"THUDM GLM 4.1",category:"Popular Foundation Models"},{provider:"openrouter",model:"thudm/glm-4.5",name:"THUDM GLM 4.5",category:"Popular Foundation Models"},{provider:"openrouter",model:"thudm/glm-4.5-air",name:"THUDM GLM 4.5 Air",category:"Popular Foundation Models"},{provider:"openrouter",model:"thudm/glm-z1",name:"THUDM GLM Z1",category:"Advanced Reasoning Models"},{provider:"openrouter",model:"thudm/glm-z1-thinking",name:"THUDM GLM Z1 Thinking",category:"Advanced Reasoning Models"},{provider:"openrouter",model:"thudm/glm-z1-nerf",name:"THUDM GLM Z1 NeRF",category:"Specialized Models"},{provider:"openrouter",model:"bai/ernie-4.5",name:"Bai Ernie 4.5",category:"Popular Foundation Models"},{provider:"openrouter",model:"gpt-j/gpt-j-6b",name:"GPT-J 6B",category:"Open Source Models"},{provider:"openrouter",model:"gpt-neo/gpt-neo-1.3b",name:"GPT-Neo 1.3B",category:"Open Source Models"},{provider:"openrouter",model:"openai/codex",name:"OpenAI Codex",category:"Specialized Code Models"},{provider:"openrouter",model:"openai/codex-002",name:"OpenAI Codex 002",category:"Specialized Code Models"},{provider:"openrouter",model:"openai/davinci",name:"OpenAI Davinci",category:"Popular Foundation Models"},{provider:"openrouter",model:"openai/davinci-codex",name:"OpenAI Davinci Codex",category:"Specialized Code Models"},{provider:"openrouter",model:"openai/multiple-choice",name:"OpenAI Multiple Choice",category:"Specialized Models"},{provider:"openrouter",model:"openai/text-davinci-003",name:"OpenAI Text Davinci 003",category:"Popular Foundation Models"},{provider:"openrouter",model:"google/bert-large-cased",name:"Google BERT Large Cased",category:"Popular Foundation Models"},{provider:"openrouter",model:"google/t5-large",name:"Google T5 Large",category:"Popular Foundation Models"},{provider:"openrouter",model:"google/t5-3b",name:"Google T5 3B",category:"Popular Foundation Models"},{provider:"openrouter",model:"facebook/bart-large",name:"Facebook BART Large",category:"Popular Foundation Models"},{provider:"openrouter",model:"facebook/opt-2.7b",name:"Facebook OPT 2.7B",category:"Popular Foundation Models"},{provider:"openrouter",model:"facebook/opt-6.7b",name:"Facebook OPT 6.7B",category:"Popular Foundation Models"},{provider:"openrouter",model:"facebook/opt-13b",name:"Facebook OPT 13B",category:"Popular Foundation Models"},{provider:"openrouter",model:"facebook/opt-30b",name:"Facebook OPT 30B",category:"Popular Foundation Models"},{provider:"openrouter",model:"facebook/opt-66b",name:"Facebook OPT 66B",category:"Popular Foundation Models"},{provider:"openrouter",model:"facebook/llama-2-13b-chat",name:"Facebook LLaMA 2 13B Chat",category:"Popular Foundation Models"},{provider:"openrouter",model:"facebook/llama-2-70b-chat",name:"Facebook LLaMA 2 70B Chat",category:"Popular Foundation Models"}];var i=r(2710),l=r(2123),c=r(4711);function d(e){let{label:t,options:r,selectedIds:a,onSelectionChange:s,placeholder:d,triggerClassName:u="w-auto min-w-56 justify-between",contentClassName:p="w-auto min-w-56",maxHeight:m="max-h-80",disabled:h=!1}=e,[g,f]=(0,n.useState)(t),v=(0,n.useRef)(null),y=(0,n.useRef)(new Map),x=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!v.current)return;let e=Array.from(y.current.entries());if(0!==e.length)return x.current=new IntersectionObserver(r=>{r.forEach(r=>{if(r.isIntersecting){let o=r.target.getAttribute("data-header-id");if(o){let r=e.find(e=>{let[t]=e;return t===o});r&&f(r[1].textContent||t)}else f(t)}})},{root:v.current,rootMargin:"-70px 0px 0px 0px",threshold:.1}),e.forEach(e=>{var t;let[r,o]=e;null==(t=x.current)||t.observe(o)}),()=>{var e;null==(e=x.current)||e.disconnect()}},[t]),(0,o.jsxs)(l.rI,{children:[(0,o.jsx)(l.ty,{asChild:!0,children:(0,o.jsxs)(i.$,{variant:"outline",disabled:h,className:"".concat(u," ").concat(a.length>0?"bg-accent text-accent-foreground":""," ").concat(h?"opacity-50 cursor-not-allowed":""),children:[(()=>{if(g!==t)return g;if(0===a.length)return d||"Select ".concat(t);if(1===a.length){let e=r.find(e=>e.id===a[0]);return(null==e?void 0:e.name)||d||"Select ".concat(t)}return"".concat(a.length," selected")})(),(0,o.jsx)(c.A,{className:"ml-2 h-4 w-4"})]})}),(0,o.jsx)(l.SQ,{className:p,children:(0,o.jsx)("div",{className:"".concat(m," overflow-y-auto"),ref:v,children:(0,o.jsx)("div",{className:"relative",children:r.map((e,t,r)=>{if("header"===e.type){let n=r.slice(t+1).findIndex(e=>"header"===e.type),i=-1===n?r.slice(t+1):r.slice(t+1,t+1+n);return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{ref:e=>{e?y.current.set("header-".concat(t),e):y.current.delete("header-".concat(t))},"data-header-id":"header-".concat(t),className:"sticky top-0 z-20 px-3 py-2 text-sm font-medium bg-popover border-b",children:e.label}),i.map(e=>"header"!==e.type&&(0,o.jsx)(l.hO,{checked:a.includes(e.id),onCheckedChange:t=>{s(e.id,t);let r=window.event;r&&r.stopPropagation()},onSelect:e=>{e.preventDefault()},disabled:e.disabled,className:e.disabled?"opacity-50":"",children:e.name},e.id))]},"section-".concat(t))}return null})})})})]})}var u=r(9369),p=r(8864);let m={enhance:{name:"Enhance & Refine",description:"Make prompts more specific and actionable"},chain:{name:"Chain of Thought",description:"Add step-by-step reasoning instructions"},role:{name:"Role-Based",description:"Add expert persona and context"},constraints:{name:"Add Constraints",description:"Add specific limitations and requirements"},examples:{name:"Few-Shot Examples",description:"Add relevant examples and patterns"},meta:{name:"Meta Prompting",description:"Use prompts about prompts to improve quality"},contextual:{name:"Contextual Prompting",description:"Add rich context and background information"},tot:{name:"Tree of Thoughts",description:"Explore multiple reasoning paths simultaneously"},generated:{name:"Generated Knowledge",description:"Generate relevant knowledge before answering"},chaining:{name:"Prompt Chaining",description:"Break complex tasks into sequential prompts"},reflexion:{name:"Reflexion",description:"Add self-reflection and iterative improvement"},constitutional:{name:"Constitutional AI",description:"Add ethical guidelines and safety principles"},ensemble:{name:"Ensemble Methods",description:"Combine multiple expert perspectives"},stepback:{name:"Step-Back Prompting",description:"First ask broader questions, then focus"},react:{name:"ReAct",description:"Combine reasoning with action execution"},critique:{name:"Self-Critique",description:"Generate, critique, and refine responses"}};function h(e){let{boostTechnique:t,setBoostTechnique:r,onBoost:n,isBoosting:a,isDisabled:s,prompt:l}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"flex gap-2",children:(0,o.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,o.jsx)(d,{label:"Boost Techniques",options:[{id:"header-techniques",type:"header",label:"Prompting Techniques",name:"Prompting Techniques"},...Object.entries(m).map(e=>{let[t,r]=e;return{id:t,name:r.name,description:r.description}})],selectedIds:[t],onSelectionChange:(e,t)=>{t&&r(e)},placeholder:"Select technique",disabled:a||s}),(0,o.jsx)(i.$,{onClick:n,disabled:!l.trim()||s||a,variant:"default",className:"w-36",children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Boosting..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Boost"]})})]})})})}var g=r(2487);function f(e){let{selectedProviders:t,setSelectedProviders:r,onExecute:n,isExecuting:a,isDisabled:s,prompt:l,availableProviders:c,isConfigured:p}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(d,{label:"LLM Providers",options:(()=>{let e=new Map;for(let r of c){var t;e.has(r.category)||e.set(r.category,[]),null==(t=e.get(r.category))||t.push({id:"".concat(r.provider,":").concat(r.model),name:r.name,disabled:!p.openrouter&&"openrouter"===r.provider})}let r=[];for(let[t,o]of e.entries())for(let e of(r.push({id:"header-".concat(t.toLowerCase().replace(/\s+/g,"-")),name:t,type:"header",label:t}),o))r.push({id:e.id,name:e.name,type:"item",disabled:e.disabled});return r})(),selectedIds:t.map(e=>"".concat(e.provider,":").concat(e.model)),onSelectionChange:(e,o)=>{let[n,a]=e.split(":"),s=c.find(e=>e.provider===n&&e.model===a);s&&(o?r([...t,s]):r(t.filter(e=>e.provider!==n||e.model!==a)))},placeholder:"Select providers",triggerClassName:"w-auto min-w-64 justify-between",contentClassName:"w-auto min-w-64",disabled:s}),(0,o.jsx)(i.$,{onClick:n,disabled:s,className:"w-36",children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Running..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Run"]})})]})})}let v=r(4338).env.NEXT_PUBLIC_BASE_PATH||(window.location.pathname.startsWith("/prompt-jet")?"":"/prompt-jet");function y(e){let{boostTechnique:t,setBoostTechnique:r,onBoost:n,isBoosting:a,isBoostDisabled:s,selectedProviders:i,setSelectedProviders:l,onExecute:c,isExecuting:d,isExecuteDisabled:u,prompt:p,availableProviders:g,isConfigured:y}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:["Selected technique: ",m[t].name," - ",m[t].description,(0,o.jsx)("a",{href:"".concat(v,"/techniques"),title:"Learn about prompting techniques",className:"ml-1 text-blue-500 hover:text-blue-700",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),(0,o.jsx)("path",{strokeWidth:"2",d:"M12 16v-4m0-4h.01"})]})})]}),(0,o.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 justify-between",children:[(0,o.jsx)(h,{boostTechnique:t,setBoostTechnique:r,onBoost:n,isBoosting:a,isDisabled:s||d,prompt:p}),(0,o.jsx)(f,{selectedProviders:i,setSelectedProviders:l,onExecute:c,isExecuting:d,isDisabled:u||a,prompt:p,availableProviders:g,isConfigured:y})]})]})}function x(e){let{isConfigured:t}=e,[r,a]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{a(!0)},[]),!r||t.openrouter)?null:(0,o.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Some providers require configuration."," ",(0,o.jsx)("button",{type:"button",className:"text-primary underline",onClick:()=>{{let e=document.querySelector('header button[title="Settings"]');e instanceof HTMLElement&&e.click()}},children:"Configure settings"})]})}var b=r(9883);let E=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,b.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})}),w=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,b.cn)("p-6 pt-0",r),...n})});var C=r(6608),M=r(2730),P=r(584),N=r(9513),R=r(3367);function T(e){let{results:t,onCopyToClipboard:r}=e,[a,s]=(0,n.useState)(new Set);if(0===t.length)return null;let i=t.some(e=>a.has(e.id)),l=e=>{s(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})};return(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",onClick:()=>l("")}),(0,o.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>{let t=a.has(e.id);return(0,o.jsx)("div",{className:t?"md:col-span-2 lg:col-span-3":"",children:(0,o.jsx)(E,{className:"transition-all duration-300 ease-in-out ".concat(t?"fixed inset-4 z-50 flex flex-col bg-background":"cursor-pointer hover:shadow-lg"),onClick:()=>!t&&l(e.id),children:(0,o.jsx)(w,{className:"p-4 ".concat(t?"flex-1 flex flex-col":""),children:(0,o.jsxs)("div",{className:"space-y-3 flex-1 flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("h3",{className:"font-semibold",children:String(e.model||"Unknown Model")}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"text-xs text-muted-foreground",children:String(e.provider||"Unknown Provider")}),(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.response)},className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Copy content",children:(0,o.jsx)(C.A,{className:"h-4 w-4 text-gray-600"})}),(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"p-1 hover:bg-gray-100 rounded transition-colors",title:t?"Minimize":"Expand",children:t?(0,o.jsx)(M.A,{className:"h-4 w-4 text-gray-600"}):(0,o.jsx)(P.A,{className:"h-4 w-4 text-gray-600"})})]})]}),(0,o.jsx)("div",{className:"text-sm bg-muted p-3 rounded overflow-y-auto transition-all duration-300 ".concat(t?"flex-1 min-h-0 max-h-[calc(100vh-12rem)]":"max-h-40"),onClick:e=>e.stopPropagation(),children:(0,o.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:"string"==typeof e.response?e.response:String(e.response||"")})}),(0,o.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)(N.A,{className:"h-3 w-3"}),Number(e.executionTimeMs||0),"ms"]}),(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)(p.A,{className:"h-3 w-3"}),Number(e.tokensUsed||0)," tokens"]}),void 0!==e.cost&&null!==e.cost&&(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)(R.A,{className:"h-3 w-3"}),"$",Number(e.cost).toFixed(4)]})]})]})})})},e.id)})})]})}function O(){return(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("p",{className:"text-2xl font-bold py-6",children:"Enhance and execute prompts across multiple LLM providers and compare results"})})}var L=r(6430),A=r(7644);let j=A.Kq,_=A.bL,S=A.l9,k=n.forwardRef((e,t)=>{let{className:r,sideOffset:n=4,...a}=e;return(0,o.jsx)(A.UC,{ref:t,sideOffset:n,className:(0,b.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...a})});function I(e){let{value:t,onChange:r,placeholder:a="Enter your prompt here..."}=e,[s,i]=(0,n.useState)(!1),[l,d]=(0,n.useState)(!1),u=async()=>{try{await navigator.clipboard.writeText(t),d(!0),setTimeout(()=>d(!1),1200)}catch(e){d(!1)}};return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("textarea",{value:t,onChange:e=>r(e.target.value),placeholder:a,className:"w-full p-4 pr-10 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-200 ease-in-out ".concat(s?"h-96":"h-32"),style:{height:s?"384px":"128px"}}),(0,o.jsxs)("div",{className:"absolute bottom-3 right-3 flex gap-2",children:[(0,o.jsx)(j,{children:(0,o.jsxs)(_,{children:[(0,o.jsx)(S,{asChild:!0,children:(0,o.jsx)("button",{onClick:u,className:"p-1.5 bg-background/80 backdrop-blur-sm hover:bg-accent rounded-md transition-all duration-200 shadow-sm hover:shadow-md border border-border/50","aria-label":"Copy prompt",type:"button",children:(0,o.jsx)(C.A,{className:"h-4 w-4 text-muted-foreground ".concat(l?"text-green-500":"")})})}),(0,o.jsx)(k,{side:"top",children:l?"Copied!":"Copy prompt"})]})}),(0,o.jsx)("button",{onClick:()=>{i(!s)},className:"p-1.5 bg-background/80 backdrop-blur-sm hover:bg-accent rounded-md transition-all duration-200 shadow-sm hover:shadow-md border border-border/50",title:s?"Collapse prompt":"Expand prompt",type:"button",children:s?(0,o.jsx)(L.A,{className:"h-4 w-4 text-muted-foreground"}):(0,o.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})})]})]})}k.displayName=A.UC.displayName;var q=r(6734);function F(e){let{prompt:t,results:r=[]}=e,[a,s]=(0,n.useState)({score:0,quality:"Poor",color:"text-red-500",bgColor:"bg-red-50",borderColor:"border-red-200"}),[i,l]=(0,n.useState)({avgResponseTime:0,avgTokensPerSecond:0,avgCost:0,color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200"});return((0,n.useEffect)(()=>{let e,r,o,n;if(!t.trim())return void s({score:0,quality:"No prompt",color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200"});let a=0,i=t.trim().split(/\s+/).length;i>=10&&i<=200?a+=30:i>200?a+=Math.max(0,30-(i-200)*.1):a+=Math.min(30,3*i);let l=/\?/.test(t),c=t.length>50;l&&(a+=20),c&&(a+=25),/\b(specific|detailed|exact|precise|clear)\b/i.test(t)&&(a+=15);let d=/\n\s*[-*•]/.test(t)||/\d+\./.test(t);d&&(a+=15),(/\n/.test(t)||/\*\*.*?\*\*/.test(t))&&(a+=10);let u=(t.match(/\b\w{8,}\b/g)||[]).length/i;u>.1&&u<.3&&(a+=10),(a=Math.min(100,Math.round(a)))>=80?(e="Excellent",r="text-green-600",o="bg-green-50",n="border-green-200"):a>=60?(e="Good",r="text-blue-600",o="bg-blue-50",n="border-blue-200"):a>=40?(e="Fair",r="text-yellow-600",o="bg-yellow-50",n="border-yellow-200"):(e="Poor",r="text-red-600",o="bg-red-50",n="border-red-200"),s({score:a,quality:e,color:r,bgColor:o,borderColor:n})},[t]),(0,n.useEffect)(()=>{let e,t,o;if(0===r.length){try{let e=localStorage.getItem("promptJetHistoricalData");if(e){let t=JSON.parse(e);if(t.efficiency)return void l(t.efficiency)}}catch(e){console.warn("Failed to load historical efficiency data",e)}l({avgResponseTime:0,avgTokensPerSecond:0,avgCost:0,color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200"});return}let n=r.reduce((e,t)=>e+t.executionTimeMs,0)/r.length,a=r.reduce((e,t)=>e+t.tokensUsed,0)/(r.reduce((e,t)=>e+t.executionTimeMs,0)/1e3),s=r.reduce((e,t)=>e+(t.cost||0),0)/r.length;n<3e3&&a>50?(e="text-green-600",t="bg-green-50",o="border-green-200"):n<5e3&&a>25?(e="text-yellow-600",t="bg-yellow-50",o="border-yellow-200"):(e="text-red-600",t="bg-red-50",o="border-red-200");let i={avgResponseTime:Math.round(n),avgTokensPerSecond:Math.round(a),avgCost:Math.round(1e3*s)/1e3,color:e,bgColor:t,borderColor:o};l(i);try{let e=JSON.parse(localStorage.getItem("promptJetHistoricalData")||"{}");e.efficiency=i,localStorage.setItem("promptJetHistoricalData",JSON.stringify(e))}catch(e){console.warn("Failed to save efficiency data to localStorage",e)}},[r]),t.trim()||0!==r.length)?(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)(j,{children:(0,o.jsxs)(_,{children:[(0,o.jsx)(S,{asChild:!0,children:(0,o.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-md border ".concat(a.bgColor," ").concat(a.borderColor," transition-all duration-200"),children:[(0,o.jsx)(q.A,{className:"h-3.5 w-3.5 ".concat(a.color)}),(0,o.jsx)("span",{className:"text-xs font-medium ".concat(a.color),children:a.quality}),a.score>0&&(0,o.jsxs)("span",{className:"text-xs ".concat(a.color," opacity-75"),children:[a.score,"%"]})]})}),(0,o.jsx)(k,{className:"max-w-xs",children:(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("p",{className:"font-medium",children:"Prompt Effectiveness"}),(0,o.jsx)("p",{className:"text-sm text-muted-foreground",children:"Based on clarity, specificity, structure, and optimal length"})]})})]})}),r.length>0&&(0,o.jsx)(j,{children:(0,o.jsxs)(_,{children:[(0,o.jsx)(S,{asChild:!0,children:(0,o.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-md border ".concat(i.bgColor," ").concat(i.borderColor," transition-all duration-200"),children:[(0,o.jsx)(p.A,{className:"h-3.5 w-3.5 ".concat(i.color)}),(0,o.jsxs)("span",{className:"text-xs font-medium ".concat(i.color),children:[i.avgResponseTime,"ms"]}),(0,o.jsxs)("span",{className:"text-xs ".concat(i.color," opacity-75"),children:[i.avgTokensPerSecond," t/s"]}),i.avgCost>0&&(0,o.jsxs)("span",{className:"text-xs ".concat(i.color," opacity-75"),children:["$",i.avgCost]})]})}),(0,o.jsx)(k,{className:"max-w-xs",children:(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("p",{className:"font-medium",children:"Execution Efficiency"}),(0,o.jsxs)("div",{className:"text-sm text-muted-foreground space-y-0.5",children:[(0,o.jsxs)("p",{children:["• Avg response time: ",i.avgResponseTime,"ms"]}),(0,o.jsxs)("p",{children:["• Avg tokens/sec: ",i.avgTokensPerSecond]}),i.avgCost>0&&(0,o.jsxs)("p",{children:["• Avg cost: $",i.avgCost]})]})]})})]})}),t.trim()&&0===r.length&&(0,o.jsx)(j,{children:(0,o.jsxs)(_,{children:[(0,o.jsx)(S,{asChild:!0,children:(0,o.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-md border border-blue-200 bg-blue-50",children:[(0,o.jsx)(N.A,{className:"h-3.5 w-3.5 text-blue-600"}),(0,o.jsxs)("span",{className:"text-xs font-medium text-blue-600",children:[t.trim().split(/\s+/).length," words"]})]})}),(0,o.jsx)(k,{children:(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("p",{className:"font-medium",children:"Prompt Stats"}),(0,o.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Word count: ",t.trim().split(/\s+/).length," | Characters: ",t.length]})]})})]})})]}):null}var B=r(624);let D=new Map;class U extends Error{toJSON(){return{name:this.name,message:this.message,code:this.code,statusCode:this.statusCode,provider:this.provider,retryable:this.retryable,timestamp:this.timestamp,details:this.details,...!1}}toClientError(){return{name:this.name,message:this.message,code:this.code,statusCode:this.statusCode,retryable:this.retryable,timestamp:this.timestamp}}constructor(e,t="LLM_ERROR",r=500,o,n=!1,a,s){super(e),this.code=t,this.statusCode=r,this.provider=o,this.retryable=n,this.cause=s,this.name="LLMClientError",this.timestamp=new Date().toISOString(),this.details=a,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class z extends U{constructor(e,t,r,o){super(e,"CONFIGURATION_ERROR",400,t,!1,r,o),this.name="LLMConfigurationError"}}class K extends U{constructor(e,t,r,o,n){super(e,"RATE_LIMIT",429,t,!0,{...o,...r&&{resetTime:r.toISOString()}},n),this.resetTime=r,this.name="LLMRateLimitError"}}class G extends U{constructor(e,t,r,o){super(e,"AUTHENTICATION_ERROR",401,t,!1,r,o),this.name="LLMAuthenticationError"}}class H extends U{constructor(e,t,r,o,n){super(e,"TIMEOUT",408,t,!0,{...o,...r&&{timeoutMs:r}},n),this.timeoutMs=r,this.name="LLMTimeoutError"}}class J{async executeParallel(e,t){let r=[],o=[],n=new W(this.config.maxConcurrency);for(let a of e){await n.acquire();let e=this.executeTaskWithRetry(a).then(e=>{r.push(e),t&&t(e)}).finally(()=>{n.release()});o.push(e),o.length>=this.config.maxConcurrency&&await Promise.race(o)}return await Promise.all(o),r}async executeTaskWithRetry(e){let t=Date.now();for(let o=0;o<=this.config.retryAttempts;o++)try{var r;let o=await this.executeWithTimeout(e),n=Date.now()-t;return{requestId:e.requestId,clientId:e.clientId,response:o,executionTimeMs:n,tokensUsed:(null==(r=o.usage)?void 0:r.total_tokens)||0}}catch(r){if(o===this.config.retryAttempts){let o=Date.now()-t;return{requestId:e.requestId,clientId:e.clientId,error:r,executionTimeMs:o,tokensUsed:0}}await this.delay(this.config.retryDelayMs*Math.pow(2,o))}throw Error("Max retries exceeded")}async executeWithTimeout(e){let t=new Promise((t,r)=>{setTimeout(()=>{r(new U("Request timeout","TIMEOUT",408,e.client.getProviderName()))},this.config.timeoutMs)});return Promise.race([e.client.executePrompt(e.request),t])}delay(e){return new Promise(t=>setTimeout(t,e))}constructor(e={}){this.config={maxConcurrency:e.maxConcurrency||5,timeoutMs:e.timeoutMs||3e4,retryAttempts:e.retryAttempts||3,retryDelayMs:e.retryDelayMs||1e3}}}class W{async acquire(){return this.permits>0?void this.permits--:new Promise(e=>{this.queue.push(e)})}release(){this.permits++;let e=this.queue.shift();e&&(this.permits--,e())}constructor(e){this.queue=[],this.permits=e}}var V=r(9329);class Y{setupInterceptors(){this.httpClient.interceptors.request.use(e=>e,e=>Promise.reject(e)),this.httpClient.interceptors.response.use(e=>e,async e=>{let t=e.config;return t&&this.isRetryableError(e)?(t.retryCount=t.retryCount||0,t.retryCount>=(this.config.maxRetries||3))?Promise.reject(this.handleError(e)):(t.retryCount+=1,await this.delay((this.config.retryDelay||1e3)*t.retryCount),this.httpClient(t)):Promise.reject(this.handleError(e))})}async delay(e){return new Promise(t=>setTimeout(t,e))}isRetryableError(e){if(!e.response)return!0;let t=e.response.status;return 429===t||t>=500||408===t}handleError(e){if("ECONNABORTED"===e.code)return new H("Request timeout: ".concat(e.message),this.getProviderName());if(e.response){var t,r;let o=e.response.status,n=(null==(r=e.response.data)||null==(t=r.error)?void 0:t.message)||e.message;switch(o){case 401:case 403:return new G(n,this.getProviderName());case 429:return new K(n,this.getProviderName());case 408:return new H(n,this.getProviderName());default:return new U(n,"HTTP_".concat(o),o,this.getProviderName(),this.isRetryableError(e))}}return new U(e.message,"UNKNOWN",void 0,this.getProviderName(),!0)}transformMessages(e){return e.map(e=>({role:e.role,content:e.content,...e.name&&{name:e.name},...e.tool_calls&&{tool_calls:e.tool_calls}}))}constructor(e){this.config=e,this.httpClient=V.A.create({timeout:e.timeout||3e4,headers:{"Content-Type":"application/json",...e.customHeaders}}),this.setupInterceptors()}}class Q extends Y{async executePrompt(e){if(!this.config.apiKey)throw new z("OpenRouter API key is required","openrouter");let t={model:e.model,messages:this.transformMessages(e.messages),temperature:e.temperature,max_tokens:e.max_tokens,top_p:e.top_p,frequency_penalty:e.frequency_penalty,presence_penalty:e.presence_penalty,stream:!1,tools:e.tools,tool_choice:e.tool_choice,response_format:e.response_format};console.log("[OpenRouterClient] Sending request to OpenRouter:",{url:"".concat(this.baseUrl,"/chat/completions"),headers:{Authorization:"Bearer [REDACTED]","HTTP-Referer":this.httpClient.defaults.headers.common["HTTP-Referer"],"X-Title":this.httpClient.defaults.headers.common["X-Title"],"Content-Type":"application/json"},data:t});try{let e=await this.httpClient.post("".concat(this.baseUrl,"/chat/completions"),t);return console.log("[OpenRouterClient] Raw API response data:",JSON.stringify(e.data,null,2)),e.data}catch(e){var r,o,n,a,s,i,l;throw console.error("[OpenRouterClient] Error executing prompt:",{status:null==(r=e.response)?void 0:r.status,statusText:null==(o=e.response)?void 0:o.statusText,data:null==(n=e.response)?void 0:n.data,config:{url:null==(a=e.config)?void 0:a.url,method:null==(s=e.config)?void 0:s.method,headers:{...null==(i=e.config)?void 0:i.headers,Authorization:"Bearer [REDACTED]"},data:null==(l=e.config)?void 0:l.data}}),e}}async *executePromptStream(e){throw Error("Streaming responses are currently disabled. Use executePrompt instead for full completion responses.")}async getAvailableModels(){if(!this.config.apiKey)throw new z("OpenRouter API key is required","openrouter");return(await this.httpClient.get("".concat(this.baseUrl,"/models"))).data.data.map(e=>({id:e.id,name:e.name||e.id,provider:"openrouter",context_length:e.context_length,pricing:e.pricing}))}async validateConfig(){return!!this.config.apiKey}getProviderName(){return"openrouter"}transformMessages(e){return e.map(e=>{e.role&&e.content||console.warn("Invalid message format:",e);let t={role:e.role,content:e.content};return e.name&&"string"==typeof e.name&&(t.name=e.name),Array.isArray(e.tool_calls)&&e.tool_calls.length>0&&(t.tool_calls=e.tool_calls),t})}constructor(e){super(e),this.baseUrl="https://openrouter.ai/api/v1",e.apiKey&&(this.httpClient.defaults.headers.common.Authorization="Bearer ".concat(e.apiKey)),this.httpClient.defaults.headers.common["HTTP-Referer"]="https://prompt-jet.com",this.httpClient.defaults.headers.common["X-Title"]="Prompt Jet"}}class X{static createClient(e,t){console.log("[LLMClientFactory] Creating client for provider:",{originalProvider:e,configKeys:t?Object.keys(t):"no config"});let r=null==e?void 0:e.toString().trim().toLowerCase();if(!r){let t=Error("Provider name is required");throw console.error("[LLMClientFactory] Error:",t.message,{provider:e,normalizedProvider:r}),t}let o={openrouter:e=>new Q(e)},n=o[r];if(!n){let t=Object.keys(o).join(", "),n=Error('Unsupported provider: "'.concat(e,'". ')+"Supported providers are: ".concat(t));throw console.error("[LLMClientFactory] Error:",n.message,{originalProvider:e,normalizedProvider:r,supportedProviders:t}),n}try{return n(t)}catch(t){throw Error('Failed to initialize client for provider "'.concat(e,'": ').concat(t instanceof Error?t.message:String(t)))}}static getSupportedProviders(){return["openrouter"]}}var Z=r(4338);class ${async executeBatch(e,t){let r=[];for(let t of e)try{var o,n,a,s,i,l,c;let e=(null==(o=t.metadata)?void 0:o.provider)||"openrouter";console.log("[BatchProcessor] Creating client for provider: ".concat(e),{hasApiKey:!!((null==(n=t.apiConfig)?void 0:n.apiKey)||"openrouter"===e&&Z.env.OPENROUTER_API_KEY)});let d={...t.apiConfig,..."openrouter"===e&&{apiKey:(null==(a=t.apiConfig)?void 0:a.apiKey)||Z.env.OPENROUTER_API_KEY,baseUrl:"https://openrouter.ai/api/v1"}},u=X.createClient(e,d),p={model:(null==(s=t.apiConfig)?void 0:s.model)||"default",messages:[{role:"user",content:t.prompt}],max_tokens:(null==(i=t.apiConfig)?void 0:i.max_tokens)||1e3,temperature:null!=(c=null==(l=t.apiConfig)?void 0:l.temperature)?c:.7};r.push({requestId:t.id,clientId:e,client:u,request:p})}catch(e){console.error("Failed to create client for request ".concat(t.id,":"),e);continue}return(await this.executor.executeParallel(r,r=>{var o,n,a,s;let i={id:r.requestId,response:r.response?{content:(null==(n=r.response.choices[0])||null==(o=n.message)?void 0:o.content)||"",usage:r.response.usage}:void 0,error:null==(a=r.error)?void 0:a.message,executionTimeMs:r.executionTimeMs,metadata:null==(s=e.find(e=>e.id===r.requestId))?void 0:s.metadata};(null==t?void 0:t.onResult)&&t.onResult(i)})).map(t=>{var r,o,n,a,s,i;let l="";return t.response&&Array.isArray(t.response.choices)?l=t.response.choices.map(e=>{var t;return(null==(t=e.message)?void 0:t.content)||""}).join(""):(null==(a=t.response)||null==(n=a.choices)||null==(o=n[0])||null==(r=o.message)?void 0:r.content)&&(l=t.response.choices[0].message.content),{id:t.requestId,response:t.response?{content:l,usage:t.response.usage}:void 0,error:null==(s=t.error)?void 0:s.message,executionTimeMs:t.executionTimeMs,metadata:null==(i=e.find(e=>e.id===t.requestId))?void 0:i.metadata}})}constructor(e={}){this.executor=new J({maxConcurrency:e.maxConcurrency||5,timeoutMs:e.timeoutMs||3e4,retryAttempts:e.retries||2})}}class ee{async execute(e,t,r,o){if(console.log("[PromptExecutor] Starting execution with providers:",JSON.stringify(t,null,2)),!e.trim())return console.warn("[PromptExecutor] Empty prompt provided"),[];if(0===t.length)return console.warn("[PromptExecutor] No providers specified"),[];let n=this.prepareRequests(e,t),a=[];try{return(await this.batchProcessor.executeBatch(n,{onProgress:r,onResult:e=>{let t=this.mapBatchResultToExecutionResult(e);null==o||o(t),a.push(t)}})).map(e=>this.mapBatchResultToExecutionResult(e))}catch(e){throw console.error("Error executing prompts:",e),e}}prepareRequests(e,t){return console.log("[PromptExecutor] Preparing requests for providers:",JSON.stringify(t,null,2)),t.map((r,o)=>{if(console.log("[PromptExecutor] Processing provider ".concat(o+1,"/").concat(t.length,":"),JSON.stringify(r)),!r||!r.provider)throw console.error("[PromptExecutor] Invalid provider configuration:",r),Error("Invalid provider configuration at index ".concat(o,": ").concat(JSON.stringify(r)));return{id:"".concat(r.provider,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,11)),prompt:e,apiConfig:{model:r.model,temperature:this.options.temperature,top_p:this.options.topP,top_k:this.options.topK,max_tokens:this.options.maxTokens,frequency_penalty:this.options.frequencyPenalty,presence_penalty:this.options.presencePenalty,stop:this.options.stopSequences,apiKey:this.options.openRouterApiKey,baseUrl:"https://openrouter.ai/api/v1"},metadata:{provider:r.provider,model:r.model}}})}mapBatchResultToExecutionResult(e){var t,r,o,n,a;return{id:e.id,provider:(null==(t=e.metadata)?void 0:t.provider)||"unknown",model:(null==(r=e.metadata)?void 0:r.model)||"unknown",response:(null==(o=e.response)?void 0:o.content)||"",tokensUsed:(null==(a=e.response)||null==(n=a.usage)?void 0:n.total_tokens)||0,executionTimeMs:e.executionTimeMs}}constructor(e={}){var t,r,o;this.options={temperature:.7,topP:1,topK:50,maxTokens:1e3,frequencyPenalty:0,presencePenalty:0,...e};let n=null!=(t=e.maxConcurrency)?t:5,a=null!=(r=e.timeoutMs)?r:3e4,s=null!=(o=e.retries)?o:2;this.batchProcessor=new $({maxConcurrency:n,timeoutMs:a,retries:s})}}let et=async e=>{let{prompt:t,selectedProviders:r,openRouterApiKey:o,setIsExecuting:n,setResults:a,temperature:s=.7,topP:i=1,topK:l=50,maxTokens:c=1e3,frequencyPenalty:d=0,presencePenalty:u=0,onProgress:p}=e;if(!t.trim()||0===r.length)return[];n(!0),a([]);let m={enabled:!0,maxConcurrency:5,timeoutMs:3e4,retries:2};try{let e=localStorage.getItem("parallelConfig");if(e){let t=JSON.parse(e);m={...m,...t},void 0!==t.retryAttempts&&(m.retries=t.retryAttempts)}}catch(e){console.warn("Failed to load parallel config from localStorage",e)}try{let e=new ee({temperature:s,topP:i,topK:l,maxTokens:c,frequencyPenalty:d,presencePenalty:u,openRouterApiKey:o,...m.enabled?{maxConcurrency:m.maxConcurrency,timeoutMs:m.timeoutMs,retries:m.retries}:{}}),n=r.map(e=>({provider:e.provider,model:e.model})),h=[];return console.log("Executing prompt with ".concat(n.length," providers")),await e.execute(t,n,(e,t)=>{p&&p(e,t)},e=>{let t={id:e.id,provider:e.provider,model:e.model,response:e.response,tokensUsed:e.tokensUsed,executionTimeMs:e.executionTimeMs,cost:e.cost};h.push(t),a([...h])})}catch(e){throw console.error("Error executing prompts in parallel:",e),e}finally{n(!1)}},er=async e=>{try{await navigator.clipboard.writeText(e),alert("Content copied to clipboard!")}catch(e){console.error("Failed to copy: ",e),alert("Failed to copy content")}};function eo(){let[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)([]),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!1),[p,m]=(0,n.useState)("enhance"),{openRouterApiKey:h,isConfigured:g}=(0,a.I)(),{boostPrompt:f,isBoosting:v}=function(e){let{setPrompt:t}=e,[r,o]=(0,n.useState)(!1),{openRouterApiKey:i,isConfigured:l}=(0,a.I)(),c=(0,n.useMemo)(()=>s.find(e=>"openrouter"===e.provider&&"google/gemini-2.5-flash"===e.model),[]),d=(0,n.useMemo)(()=>c&&i?B.LLMClientFactory.createClient(c.provider,{apiKey:i}):null,[c,i]),u=(0,n.useCallback)((e,t)=>"".concat(t,":").concat(e),[]);return{boostPrompt:(0,n.useCallback)(async(e,r,n)=>{let a=n||r;if(!a.trim()||!l.openrouter||!d||!c)return;let s=u(a,e),i=D.get(s);if(i)return void t(i);async function p(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{var n,i,l;if(!d)return void console.error("LLM client is not initialized");let o=((e,t)=>{switch(e){case"chain":return'You are skilled in chain-of-thought prompting. Rewrite the prompt to:\n\n1. Start with "Let\'s think step by step."\n2. Use numbered, logical steps.\n3. Be concise; end with a final answer.\n4. Only output a prompt that would score 100 for effectiveness and efficiency.\n5. At the end, output a line: Boost Score: 100\n6. Do NOT output anything unless the boost score is 100.\n\nFormat:\n- Numbered list\n- Clearly marked final answer\n\n<original_prompt>\n'.concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100");case"role":return"You are a prompt engineer. Modify the prompt to assign a relevant expert role.\n\n1. Define an expert persona.\n2. Add domain context.\n3. Make it task-specific and clear.\n4. Only output a prompt that would score 100 for effectiveness and efficiency.\n5. At the end, output a line: Boost Score: 100\n6. Do NOT output anything unless the boost score is 100.\n\nFormat:\n- Role statement\n- Revised prompt\n\n<original_prompt>\n".concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100");case"constraints":return"Add clear constraints to the prompt.\n\n1. Define limits (e.g., format, length, exclusions).\n2. Be specific and brief.\n3. Only output a prompt that would score 100 for effectiveness and efficiency.\n4. At the end, output a line: Boost Score: 100\n5. Do NOT output anything unless the boost score is 100.\n\nFormat:\n- Bullet list of constraints\n\n<original_prompt>\n".concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100");case"examples":return"Improve the prompt by adding 2–3 concise examples.\n\n1. Include both input and output.\n2. Match desired format and tone.\n3. Only output a prompt that would score 100 for effectiveness and efficiency.\n4. At the end, output a line: Boost Score: 100\n5. Do NOT output anything unless the boost score is 100.\n\nFormat:\n- Examples first\n- Then the prompt\n\n<original_prompt>\n".concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100");case"meta":return"Make the prompt guide AI to self-evaluate and improve.\n\n1. Add review and refinement steps.\n2. Include quality checks.\n3. Be brief and focused.\n4. Only output a prompt that would score 100 for effectiveness and efficiency.\n5. At the end, output a line: Boost Score: 100\n6. Do NOT output anything unless the boost score is 100.\n\nFormat:\n- Meta-prompt with eval and improvement steps\n\n<original_prompt>\n".concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100");case"contextual":return"Add minimal but relevant context.\n\n1. Include background, audience, and use case.\n2. Be concise and actionable.\n3. Only output a prompt that would score 100 for effectiveness and efficiency.\n4. At the end, output a line: Boost Score: 100\n5. Do NOT output anything unless the boost score is 100.\n\nFormat:\n- Context first\n- Then the prompt\n\n<original_prompt>\n".concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100");case"tot":return"Rewrite the prompt to explore multiple reasoning paths.\n\n1. Create 3–4 solution branches.\n2. Add compare + synthesize step.\n3. Only output a prompt that would score 100 for effectiveness and efficiency.\n4. At the end, output a line: Boost Score: 100\n5. Do NOT output anything unless the boost score is 100.\n\nFormat:\n- Numbered paths\n- Final decision step\n\n<original_prompt>\n".concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100");case"generated":return"Require AI to generate and verify facts before answering.\n\n1. Gather key info.\n2. Assess confidence.\n3. Use it in final answer.\n\nFormat:\n- Knowledge section\n- Answer section\n\n<original_prompt>\n".concat(t,"\n</original_prompt>");case"chaining":return"Break the task into dependent steps.\n\n1. Each step builds on the last.\n2. Include checks.\n3. Keep steps short.\n\nFormat:\n- Numbered steps\n- Note dependencies\n\n<original_prompt>\n".concat(t,"\n</original_prompt>");case"reflexion":return"Add a self-check loop.\n\n1. Generate.\n2. Reflect and critique.\n3. Revise.\n4. Keep all brief.\n\nFormat:\n- Answer\n- Self-review\n- Final version\n\n<original_prompt>\n".concat(t,"\n</original_prompt>");case"constitutional":return"Add ethical rules to the prompt.\n\n1. Include safety, fairness, and transparency.\n2. Be short and direct.\n\nFormat:\n- Bullet list of principles\n- Then the prompt\n\n<original_prompt>\n".concat(t,"\n</original_prompt>");case"ensemble":return"Use multiple expert viewpoints.\n\n1. Give 3–5 short answers from different roles.\n2. Combine into one final output.\n\nFormat:\n- Each expert’s answer\n- Final consensus\n\n<original_prompt>\n".concat(t,"\n</original_prompt>");case"stepback":return"Step back before solving.\n\n1. Start with abstract questions.\n2. Then go specific.\n3. Link both clearly.\n\nFormat:\n- Abstract view\n- Detailed solution\n\n<original_prompt>\n".concat(t,"\n</original_prompt>");case"react":return"Alternate Thought → Action → Observation cycles.\n\n1. Think before each action.\n2. Reflect after.\n3. Repeat until done.\n\nFormat:\n- T/A/O sections\n- Repeat as needed\n\n<original_prompt>\n".concat(t,"\n</original_prompt>");case"critique":return"Require AI to critique its own answer.\n\n1. Generate.\n2. Critique.\n3. Revise.\n4. Only output a prompt that would score 100 for effectiveness and efficiency.\n5. At the end, output a line: Boost Score: 100\n6. Do NOT output anything unless the boost score is 100.\n\nFormat:\n- Initial answer\n- Critique\n- Final version\n\n<original_prompt>\n".concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100");default:return"Make this prompt clearer and more useful.\n\n1. Clarify the goal, add steps, format, and limits, and cut fluff.\n2. Only output an enhanced prompt that is maximally effective and efficient for an LLM.\n3. At the end, output a line: Boost Score: 100\n4. Do NOT output anything unless the boost score is 100.\n\nFormat:\n<original_prompt>\n".concat(t,"\n</original_prompt>\n\nEnhanced Prompt:\n[Your improved prompt here]\n\nBoost Score: 100")}})(e,a);if(!c)throw Error("OpenRouter provider with model 'google/gemini-2.5-flash' not found");await new Promise(e=>setTimeout(e,0));let u=await d.executePrompt({model:c.model,messages:[{role:"user",content:o}],temperature:.7,max_tokens:2e3});if(null==(l=u.choices)||null==(i=l[0])||null==(n=i.message)?void 0:n.content){let e=u.choices[0].message.content,o=e.match(/Boost Score:\s*(\d+)/i),n=o?parseInt(o[1],10):null;if(100===n){D.set(s,e),setTimeout(()=>D.delete(s),3e5);let r=e.match(/Enhanced Prompt:\s*([\s\S]*?)\n?Boost Score:/i),o=r?r[1].trim():e;t(o)}else++r<3?(console.warn("Boost score was not 100 (got ".concat(n,"). Retrying... [Attempt ").concat(r,"]")),await p(r)):console.error("Failed to generate a boost prompt with score 100 after 3 attempts. No boost applied.")}}catch(e){console.error("Boost failed:",e)}finally{o(!1)}}o(!0),n&&t(n),"requestIdleCallback"in window?window.requestIdleCallback(async()=>{await p(0)},{timeout:1e3}):setTimeout(()=>p(0),0)},[d,c,l.openrouter,t,u]),isBoosting:r}}({setPrompt:t}),b=async()=>{let t={temperature:.7,topP:1,topK:50,maxTokens:1e3,frequencyPenalty:0,presencePenalty:0,stopSequences:[]};try{let e=localStorage.getItem("promptConfig");if(e){let r=JSON.parse(e);"string"==typeof r.stopSequences&&(r.stopSequences=r.stopSequences.split(",").map(e=>e.trim()).filter(e=>e)),t={...t,...r}}}catch(e){console.warn("Failed to load prompt config from localStorage",e)}await et({prompt:e,selectedProviders:r,openRouterApiKey:h,setIsExecuting:u,setResults:c,...t})};return(0,o.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[(0,o.jsx)(O,{}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)(I,{value:e,onChange:t,placeholder:"Enter your prompt here..."}),(0,o.jsx)(F,{prompt:e,results:l})]}),(0,o.jsx)(y,{boostTechnique:p,setBoostTechnique:m,onBoost:()=>f(p,e),isBoosting:v,isBoostDisabled:!g.openrouter||!e.trim()||d,selectedProviders:r,setSelectedProviders:i,onExecute:b,isExecuting:d,isExecuteDisabled:!e.trim()||!g.openrouter,prompt:e,availableProviders:s,isConfigured:g}),(0,o.jsx)(x,{isConfigured:g}),(0,o.jsx)(T,{results:l,onCopyToClipboard:er})]})}},8730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9883:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var o=r(2987),n=r(607);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,o.$)(t))}}},e=>{e.O(0,[886,473,587,902,358],()=>e(e.s=3418)),_N_E=e.O()}]);